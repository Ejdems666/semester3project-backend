<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE xml>
<migration xmlns="http://ebean-orm.github.io/xml/ns/dbmigration">
    <changeSet type="apply">
        <createTable name="booking" pkName="pk_booking">
            <column name="id" type="integer" primaryKey="true"/>
            <column name="week" type="timestamp"/>
            <column name="user_id" type="integer" notnull="true" references="user.id" foreignKeyName="fk_booking_user_id" foreignKeyIndex="ix_booking_user_id"/>
            <column name="rental_id" type="integer" notnull="true" references="rental.id" foreignKeyName="fk_booking_rental_id" foreignKeyIndex="ix_booking_rental_id"/>
        </createTable>
        <createTable name="location" pkName="pk_location">
            <column name="id" type="integer" primaryKey="true"/>
            <column name="title" type="varchar" notnull="true"/>
            <column name="description" type="TEXT" notnull="true"/>
            <column name="image_url" type="varchar" notnull="true"/>
            <column name="latitude" type="double"/>
            <column name="longitude" type="double"/>
        </createTable>
        <createTable name="rating" pkName="pk_rating">
            <column name="id" type="integer" primaryKey="true"/>
            <column name="user_id" type="integer" notnull="true" references="user.id" foreignKeyName="fk_rating_user_id" foreignKeyIndex="ix_rating_user_id"/>
            <column name="rental_id" type="integer" notnull="true" references="rental.id" foreignKeyName="fk_rating_rental_id" foreignKeyIndex="ix_rating_rental_id"/>
            <column name="rating" type="integer" notnull="true"/>
        </createTable>
        <createTable name="rental" pkName="pk_rental">
            <column name="id" type="integer" primaryKey="true"/>
            <column name="title" type="varchar" notnull="true"/>
            <column name="city" type="varchar" notnull="true"/>
            <column name="zip" type="varchar" notnull="true"/>
            <column name="address" type="varchar" notnull="true"/>
            <column name="description" type="TEXT" notnull="true"/>
            <column name="image_url" type="varchar" notnull="true"/>
            <column name="latitude" type="double"/>
            <column name="longitude" type="double"/>
        </createTable>
        <createTable name="role" pkName="pk_role">
            <column name="id" type="integer" primaryKey="true"/>
            <column name="name" type="varchar"/>
        </createTable>
        <createTable name="user" pkName="pk_user">
            <column name="id" type="integer" primaryKey="true"/>
            <column name="username" type="varchar" notnull="true"/>
            <column name="password" type="varchar" notnull="true"/>
            <column name="salt" type="varchar" notnull="true"/>
        </createTable>
        <createTable name="user_role" pkName="pk_user_role">
            <column name="user_id" type="integer" notnull="true" primaryKey="true"/>
            <column name="role_id" type="integer" notnull="true" primaryKey="true"/>
            <foreignKey name="fk_user_role_user" columnNames="user_id" refColumnNames="id" refTableName="user" indexName="ix_user_role_user"/>
            <foreignKey name="fk_user_role_role" columnNames="role_id" refColumnNames="id" refTableName="role" indexName="ix_user_role_role"/>
        </createTable>
    </changeSet>
</migration>